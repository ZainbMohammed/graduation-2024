<!DOCTYPE html>
<html dir="rtl" lang="ar">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>مساعد</title>
  <!-- Google Fonts -->
  <link
    href="https://fonts.googleapis.com/css2?family=Quicksand:wght@300;500&family=Roboto:ital,wght@0,100;0,400;1,300&family=Tajawal:wght@200;300;400;500;700;800;900&display=swap"
    rel="stylesheet">

  <!-- Vendor CSS Files -->
  <link href="../assets/vendor/aos/aos.css" rel="stylesheet">
  <link href="../assets/vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">
  <link href="../assets/vendor/bootstrap-icons/bootstrap-icons.css" rel="stylesheet">
  <link href="../assets/vendor/glightbox/css/glightbox.min.css" rel="stylesheet">
  <link href="../assets/vendor/remixicon/remixicon.css" rel="stylesheet">
  <link href="../assets/vendor/swiper/swiper-bundle.min.css" rel="stylesheet">
  <!-- Template Main CSS File -->
  <link href="../assets/css/registerStyle.css" rel="stylesheet">
  <!-- Include toastr CSS -->
<link href="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/css/toastr.min.css" rel="stylesheet">

</head>

<body>
  <!-- =======header ======= -->
  <header id="header" class="header fixed-top">
    <div class="container-fluid container-xl d-flex align-items-center justify-content-between">

      <a href="index.html" class="logo d-flex align-items-center">
        <img src="../assets/img/logo.png" alt="logo">
        <!-- <span>FlexStart</span> -->
      </a>

      <nav id="navbar" class="navbar">
        <ul>
          <li><a class="nav-link scrollto active" href="#main">الرئيسية</a></li>
          <li><a class="nav-link scrollto" href="#services">خدماتنا</a></li>
          <li><a class="nav-link scrollto" href="#using-way">طريقة الاستخدام</a></li>
          <li><a class="nav-link scrollto" href="#pricing">الأسعار</a></li>
          <li><a class="nav-link scrollto" href="#">الأسئلة الشائعة</a></li>
          <li><a class="nav-link scrollto" href="#team">من نحن</a></li>
          <li><a class="nav-link scrollto" href="#contact">تواصل معنا</a></li>
          <li><a class="getstarted scrollto" href="#">جرب الآن</a></li>
          <li><a class="nav-link scrollto" href="#">تسجيل الدخول</a></li>
        </ul>
        <i class="bi bi-list mobile-nav-toggle"></i>
      </nav><!-- .navbar -->


    </div>
  </header><!-- End Header -->


  <!-- Register section -->
  <section>
    <br>
    <div class="wrapper">
      <div class="container main">
        <div class="row">
          <div class="col-md-6 right-side">
            <div class="input-box">
              <br><br>
              <h3>سجل الآن و استمتع بالتجربة</h3>

              <form id="signupForm" action="/register" method="POST">
                <div class="input-field">
                  <label for="name" class="form-label">اسم المستخدم</label>
                  <input type="text" id="name" class="form-control">
                </div>
                <div class="input-field">
                  <label for="email" class="form-label">الايميل</label>
                  <input type="email" id="email" class="form-control">
                </div>
                <div class="input-field">
                  <label for="password" class="form-label">الباسورد</label>
                  <input type="password" id="password" class="form-control" aria-describedby="passwordHelpBlock">
                </div>
                <h3>معلومات المتجر</h3>
                <div class="input-field">
                  <label for="bussName" class="form-label">اسم المتجر</label>
                  <input type="text" id="bussName" class="form-control">
                </div>
                <div class="input-field">
                  <label for="bussEmail" class="form-label">ايميل المتجر</label>
                  <input type="email" id="bussEmail" class="form-control">
                </div>
                <div class="input-field">
                  <label for="bussIndustry" class="form-label">نوع المتجر</label>
                  <input type="text" id="bussIndustry" class="form-control">
                </div>
                <div class="input-field">
                  <label for="bussPhone" class="form-label">رقم المتجر</label>
                  <input type="text" id="bussPhone" class="form-control">
                </div>
                <div class="input-field">
                  <label for="bussCountry" class="form-label">الدولة</label>
                  <input type="text" id="bussCountry" class="form-control">
                </div>
                <input type="submit" value="انشاء حساب" class="btn">
              </form>

              <div class="signin text-center">
                <span>هل لديك حساب ؟<a href="./login.html">تسجيل دخول</a></span>
              </div>
            </div>
          </div>
          <div class="col-md-6 image-side">

            <!-------------      image     ------------->

            <img src="../assets/img/register/register.png" alt="">
            <!-- <div class="text">
                        <p>Join the community of developers <i>- ludiflex</i></p>
                    </div> -->

          </div>
        </div>
      </div>
    </div>
  </section>
  <!-- End Register section -->

  <!-- Include toastr JS -->
  <!-- Template Main JS File -->
  <script>


document.getElementById('signupForm').addEventListener('submit', async function (event) {
    event.preventDefault(); // Prevent default form submission

    // Initialize toastr
// toastr.options = {
//     closeButton: true,
//     progressBar: true,
//     positionClass: 'toast-top-right',
//     timeOut: 3000 // Duration in milliseconds
// };
    // Get input field values
    const userName = document.getElementById('name').value;
    const email = document.getElementById('email').value;
    const password = document.getElementById('password').value;
    const businessName = document.getElementById('bussName').value;
    const businessEmail = document.getElementById('bussEmail').value;
    const businessIndustry = document.getElementById('bussIndustry').value;
    const businessPhone = document.getElementById('bussPhone').value;
    const businessCountry = document.getElementById('bussCountry').value;

    // Construct data object
    const data = {
        userName: userName,
        email: email,
        password: password,
        businessInfo: {
            name: businessName,
            email: businessEmail,
            industry: businessIndustry,
            phone: businessPhone,
            country: businessCountry
        }
    };

    try {
        // Make POST request to API endpoint
        const response = await fetch('http://localhost:3000/api/users/register', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json'
            },
            body: JSON.stringify(data)
        });

        const responseData = await response.json();

        // Check response status
        if (response.ok) {
            // Registration successful, handle accordingly (e.g., show success message, redirect to login page)
            console.log('Registration successful:', responseData);
            // Registration successful
            // toastr.success('Registration successful! Redirecting to login page...');
            // setTimeout(() => {
            //     window.location.href = './login.html'; // Redirect to login page after successful registration
            // }, 3000); // Redirect after 3 seconds

            alert('Registration successful!'); // Example: Show alert message
            window.location.href = './login.html'; // Redirect to login page after successful registration
        } else {
            // Registration failed, handle error (e.g., display error message)
            console.error('Registration failed:', responseData.error);
            alert('Registration failed! Please try again.'); // Example: Show alert message
        }
    } catch (error) {
        console.error('Error:', error);
        alert('Error: Please check your network connection.'); // Example: Show alert message for network error
    }
});

  </script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/js/toastr.min.js"></script>

  <script src="../assets/js/main.js"></script>
</body>

</html>